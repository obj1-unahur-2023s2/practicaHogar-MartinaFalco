import example.*

describe "Test de facturación"{
	const c1 = new Cliente(pais = argentina)
	const c2 = new ClienteFull(pais = argentina)
	const c3 = new ClientePrepago(pais = argentina)
	const c4 = new ClienteControl(pais = argentina)
	
	const l1 = new Llamada(paisRemitente = c1.pais(), paisDestinatario = peru, duracion = 10)
	const l2 = new Llamada(paisRemitente = c4.pais(), paisDestinatario = argentina, duracion = 10)
	const t1 = new Tarjeta(valor = 500)
	
	test "El cliente basico hace una llamada nacional desde argentina de 10 minutos y gasta 250"{
		l2.calcularPrecio()
		c1.hacerLlamada(l2)
		assert.that(c1.importeMensual() == 250)
	}
	
	test "El cliente control hace una llamada internacional, y es gratis ya que está dentro de las 100 primeras"{
		l1.calcularPrecio()
		c4.hacerLlamada(l1)
		assert.that(c4.importeMensual() == 0)
	}

	test "El cliente full tiene un importe mensual de 5000"{
		assert.that(c2.importeMensual() == 5000)
	}

	test "El cliente prepago compra una tarjeta de 500 pesos y ese es su importe mensual"{
		c3.comprarTarjeta(t1)
		assert.equals(c3.importeMensual(),500)
	}

	
}

describe "Test de empresa y estadisticas"{
	const c1 = new Cliente(pais = argentina)
	const c2 = new ClienteFull(pais = argentina)
	const c3 = new ClientePrepago(pais = argentina)
	const c4 = new ClienteControl(pais = argentina)
	
	const l1 = new Llamada(paisRemitente = c1.pais(), paisDestinatario = c3.pais(), duracion = 10)
	const l2 = new Llamada(paisRemitente = c4.pais(), paisDestinatario = argentina, duracion = 10)
	const l3 = new Llamada(paisRemitente = c3.pais(), paisDestinatario = c1.pais(), duracion = 10)
	const t1 = new Tarjeta(valor = 500)
	
	test "Los clientes c1 y c2 no se comunicaron"{
		empresa.ingresarCliente(c1)
		empresa.ingresarCliente(c2)
		assert.notThat(empresa.clientesQueSeComunicaronCon(c2) == c1)
	}
	
	test "La liquidacion total es 5750"{
		empresa.ingresarCliente(c1)
		empresa.ingresarCliente(c2)
		empresa.ingresarCliente(c3)
		empresa.ingresarCliente(c4)
		l2.calcularPrecio()
		l1.calcularPrecio()
		c1.hacerLlamada(l2)
		c4.hacerLlamada(l1)
		c3.comprarTarjeta(t1)
		assert.equals(empresa.liquidacionTotal(),5750)
	}
	
	test "El cliente c4 no es amigo del cliente c1"{
		assert.notThat(c1.esAmigoDe(c4))
	}
	
	test "El cliente c3 se comunica solo con amigos"{
		c3.hacerLlamada(l3, c1)
		c1.hacerLlmada(l1, c3)
		assert.that(c3.seComunicaSoloConAmigos())
	}
	

	
	
	
	
	
	
	
}